{/* TODO 

- does not handle any polymorphism whatsoever, no allof or anyOf 

- se allows configure namespaces if you want. makes a git repo if you want. 
- og gives you... travis ci lol

- se provides asynchronous versions of each HTTP call, such as `getStation` and `getStationAsync`.
- OpenAPI Generator provides asynchronous versions of each HTTP call, such as `AddPet` and `AddPetAsync`.

*/}

import { Table } from "@/mdx/components";

# Comparing OpenAPI PHP SDK Generators

The biggest generator of SDKs (a.k.a API clients) in PHP is the multilingual open-source generator [OpenAPI Generator](https://openapi-generator.tech/), but so many of our users have switched to Speakeasy for their PHP SDKs it seemed helpful to compare the offerings and help others make an informed decision.

Open-source OpenAPI generators are great for experimentation but lack the reliability, performance, and intuitive developer experience required for critical applications. As an alternative, Speakeasy creates [idiomatic SDKs](/post/client-sdks-as-a-service) that meet the bar for enterprise use.

Here's the high-level summary of the differences between Speakeasy and OpenAPI Generator:

<Table
  columns={[
    { key: "feature", header: "Feature" },
    { key: "speakeasy", header: "Speakeasy" },
    { key: "openapi", header: "OpenAPI Generator" }
  ]}
  data={[
    { feature: "OpenAPI 3.2 support", speakeasy: "âœ…", openapi: "âŒ" },
    { feature: "OpenAPI 3.1 support", speakeasy: "âœ…", openapi: "ðŸš§" },
    { feature: "PHP version support", speakeasy: "PHP >=8.2", openapi: "PHP >=8.1" },
    { feature: "Laravel integration", speakeasy: "âœ…", openapi: "âŒ" },
    { feature: "Type safety", speakeasy: "âœ…", openapi: "âŒ" },
    { feature: "Runtime type checking", speakeasy: "âœ… JMS Serializer", openapi: "âŒ" },
    { feature: "Async support", speakeasy: "âœ…", openapi: "âœ…" },
    { feature: "OAuth 2.0 support", speakeasy: "âœ…", openapi: "âš ï¸ Implict grant only" },
    { feature: "Serialization", speakeasy: "âœ… JMS Serializer", openapi: "âœ… PHP extensions" },
    { feature: "Enum support", speakeasy: "âœ…", openapi: "âš ï¸ Uses getter/setter workarounds" },
    { feature: "Union type handling", speakeasy: "âœ…", openapi: "âš ï¸ Creates custom implementation" },
    { feature: "Content type support", speakeasy: "JSON and Form", openapi: "JSON, Form, and XML" },
    { feature: "Documentation", speakeasy: "âœ…", openapi: "âš ï¸ Examples may lack required fields" },
    /* { feature: "PHPUnit Support", speakeasy: "âœ… PHPUnit v10+", openapi: "âš ï¸ PHPUnit v8/v9 only" }, */
    { feature: "CI/CD integration", speakeasy: "âœ…", openapi: "âŒ" }
  ]}
/>

In this post, we'll do a technical deep dive on creating PHP SDKs using both Speakeasy and OpenAPI Generator, then we'll compare the generated SDKs.

## History of PHP OpenAPI generators

**OpenAPI Generator** is a community-run open-source tool for generating SDKs from OpenAPI documents. The project is not connected to the OpenAPI Initiative at all, which has been the source of much confusion. The origin of this project was as a [fork of Swagger Codegen](https://openapi-generator.tech/docs/fork-qna). [Swagger CodeGen](https://swagger.io/tools/swagger-codegen) is a similar tool maintained by SmartBear.

Both OpenAPI Generator and Swagger Codegen have a history of slow updates and lack of support for the latest OpenAPI versions, with Swagger CodeGen [showing no sign of supporting OpenAPI v3.1](https://github.com/swagger-api/swagger-codegen/issues/12560), and OpenAPI Generator still only offering beta support for OpenAPI v3.1. Seeing as OpenAPI v3.2 has been out for months at time of writing, still having incomplete or entirely missing support for v3.1 shows a worrying lack of progress.

PHP version support has also been slow. Managing which PHP versions to support is difficult, but maintaining compatibility with new PHP versions is critical and something these projects have struggled with. The last mention of PHP in the Swagger Generator roadmap was "adding compatibility with PHP 8.1" in late 2022, which is rather concerning given we're on PHP 8.5 at time of writing.

OpenAPI Generator has been able to able to maintain compatibility with newer PHP versions (does not throw errors using it on the latest versions), but the minimum version is PHP 8.1 which lost security support end of 2025. There is always a tradeoff with supporting older versions to help users stuck on older versions, but the project has also been slow to take advantage of newer PHP 8.x features to simplify generated code and improve user experience in an increasingly type safe world.

[JanePHP](https://github.com/janephp/janephp) appeared on the scene as a dedicated PHP SDK generator with more focus on modern PHP features. Sadly it too [lacks support for OpenAPI v3.1](https://github.com/janephp/janephp/issues/759 ) and above, and [does not support enums](https://github.com/janephp/janephp/issues/615) natively.

This comparison will only focus on tools with OpenAPI v3.1 support, so JanePHP will not be included and neither will Swagger CodeGen.

## Preparing the SDK generators

OpenAPI Generator requires Java to run, so some folks prefer to wrap that in a Docker image to keep their workstation clean. Thankfully there's a few [alternative installs](https://openapi-generator.tech/docs/installation/) for OpenAPI Generator, including a [Homebrew package](https://openapi-generator.tech/docs/installation/#homebrew) for macOS users, [Scoop package](https://openapi-generator.tech/docs/installation/#scoop) for Windows users, and [an NPM wrapper](https://openapi-generator.tech/docs/installation/#npm).

```sh
# macOS
brew install openapi-generator

# Windows
scoop install scoop install openapi-generator-cli

# NPM
npm install @openapitools/openapi-generator-cli -g
```

To install the Speakeasy CLI follow the steps in the [Speakeasy Getting Started guide](/docs/speakeasy-reference/cli/getting-started). Again there are multiple installation options, with [Homebrew for macOS](https://www.speakeasy.com/docs/speakeasy-reference/cli/getting-started#homebrew-macos) or [Chocolatey](https://www.speakeasy.com/docs/speakeasy-reference/cli/getting-started#chocolatey-windows) for Windows users.

```sh
# macOS
brew install speakeasy-api/tap/speakeasy

# Windows
choco install speakeasy

# Other platforms
curl -fsSL https://go.speakeasy.com/cli-install.sh | sh
```

Speakeasy has a user interface component as it is a full SaaS platform, but account creation will happen as part of the quickstart process later.

Finally to work with these SDK generators we'll need an OpenAPI document. We'll use the [Train Travel API](https://raw.githubusercontent.com/bump-sh-examples/train-travel-api/main/openapi.yaml) from our friends at Bump.sh for demonstration purposes. Save the file as `openapi.yaml` in your working directory.

```sh
wget https://raw.githubusercontent.com/bump-sh-examples/train-travel-api/main/openapi.yaml -O openapi.yaml
```

## Validating OpenAPI

Before creating an SDK its a good idea to validate the OpenAPI documents. There are plenty of tools available to do that, but it's best to use the built-in validation functionality of the SDK generator to make sure it's not only valid, but will work well in that tool.

OpenAPI Generator and Speakeasy CLI can validate OpenAPI documents, so let's run the two and see how they compare. 

Seeing as the Train Travel API is a known valid document there won't be any errors or warnings to see, but we can quickly borrow a known broken file to see the output. 

```
wget https://github.com/Mermade/openapi3-examples/raw/refs/heads/master/3.0/fail/deprecated.yaml -O openapi.bad.yaml
```

To validate using OpenAPI Generator, run the following in the terminal:

```sh
openapi-generator-cli validate -i openapi.bad.yaml
```

Surprisingly OpenAPI Generator seems to think this file is ok, despite it existing purely to be used as an example of an invalid OpenAPI document.

```
Validating spec (https://github.com/Mermade/openapi3-examples/raw/refs/heads/master/3.0/fail/deprecated.yaml)
No validation issues detected.
```

The validation command in Speakeasy is pretty similar, but seeing as Speakeasy's `validate` command can validate multiple formats including [Arazzo](https://www.speakeasy.com/openapi/arazzo), it needs `validate openapi` to specify the format:

```sh
speakeasy validate openapi -s openapi.bad.yaml
```

Speakeasy correctly identifies the issues with the file, seeing 1 error, 1 warning, and 3 hints.

```
validation error: [line 8] validate-json-schema - OpenAPI document invalid: expected boolean, but got string - https://spec.openapis.org/oas/3.0/schema/2021-09-28#/definitions/Operation/properties/deprecated/type
```

An error like this is critical to catch before generating an SDK, as it could lead to runtime errors or unexpected behavior in the generated code, so make sure to fix any errors before proceeding. 

Warnings can also exist, but usually are not blockers. Many warnings are best practice suggestions, like missing `operationId`, which will make generated method names less readable.

```
validation warn: [line 7] operation-operationId - the `GET` operation does not contain an `operationId`
```

Hint messages are more minor suggestions, like missing descriptions on parameters, missing examples, all things that are technically optional but helpful for SDK users. For example, not defining at least one server URL in the OpenAPI means the SDK will not know where to send requests, unless configured manually.

```
â€¢ validation hint: [line 1] validate-servers - No servers found in document, either add servers to the document or set a baseServerUrl in the gen.yaml config file
â€¢ validation hint: [line 10] missing-examples - Missing example for parameter. Consider adding an example
â€¢ validation hint: [line 17] missing-error-response - An error response should be defined for all operations
```

The warnings and hints in that document are more like opinions than specifically something that's definitely going to be a problem, but it's worrying that OpenAPI Generator didn't catch the error.

## Creating the SDKs

Right, time to generate some code. Let's create one with OpenAPI Generator and one with Speakeasy, then compare the results.

### Creating an SDK with OpenAPI Generator

OpenAPI Generator includes three different PHP templates for SDK generation: `php`, `php-dt`, `php-nexgen`. We'll use the stable [`php` generator](https://openapi-generator.tech/docs/generators/php) as `php-dt` is a wrapper around a very niche [DataTransfer](https://github.com/Articus/DataTransfer) package, and `php-nextgen` has been in beta for a long time without making much progress.

To create an SDK from the schema file using OpenAPI Generator, we ran the command below, which we found in the [OpenAPI Generator README](https://github.com/OpenAPITools/openapi-generator#16---docker).

```sh
openapi-generator-cli generate -i openapi.yaml -g php -o og
```

OpenAPI Generator creates three folders:

<Table
  columns={[
    { key: "folder", header: "Folder" },
    { key: "content", header: "Content" }
  ]}
  data={[
    { 
      folder: "`docs`", 
      content: "Documentation in `.md` files for each object." 
    },
    { 
      folder: "`lib`", 
      content: "PHP code to call the API on the server, includes a `Model` folder containing a file for each object in the schema and an `Api` folder containing a file for each tag in the schema. If you pass [parameters](https://openapi-generator.tech/docs/generators/php#config-options) to the build command, you can rename `Api`, for example, to `TrainTravelSdk`." 
    },
    { 
      folder: "`test`", 
      content: "Unit test stubs for all objects and operations. The test stubs are empty, leaving testing logic to the developer." 
    }
  ]}
/>

A warning from OpenAPI Generator in the terminal read:

```
OpenAPI 3.1 support is still in beta. To report an issue related to 3.1 spec, please kindly open an issue in the Github repo: https://github.com/openAPITools/openapi-generator.
```

The [OpenAPI Generator roadmap](https://openapi-generator.tech/docs/roadmap) hasn't been updated since late 2022 and does not mention PHP or OpenAPI at all, so the comparison will have to focus on the current state of the SDKs.

### Creating an SDK with Speakeasy

Next, create an SDK using the Speakeasy CLI with the command below.

```sh
speakeasy quickstart
```

Speakeasy gives multiple warnings about `xml request bodies are not currently supported` and creates the following folders.

<Table
  columns={[
    { key: "folder", header: "Folder" },
    { key: "content", header: "Content" }
  ]}
  data={[
    { 
      folder: "`docs`", 
      content: "Documentation in `.md` files for each component, operation, and SDK (tag)." 
    },
    { 
      folder: "`src`", 
      content: "PHP code to call the API on the server, containing a `Models` folder for each object and operation in the schema. The `src` folder also contains a `Utils` folder containing code for common functions, like security and date handling." 
    }
  ]}
/>

Speakeasy does not create test stubs, as unit testing is performed on Speakeasy's generator instead of the generated SDK. Shipping unit tests for generated SDKs adds unnecessary complexity and dependencies.

## Calling the server

Swagger provides a complete test server for the PetStore OpenAPI 3.1 schema at https://petstore31.swagger.io.

We called the pet operations given in each SDK's README file against the test server to check that the SDKs contain working code.

We used a [Docker Composer 2.7](https://hub.docker.com/layers/library/composer/2.7/images/sha256-692dd0a0b775cc25ea0cf3ed936b1470647191a6417047e6a77d757a9f29c956?context=explore) container, which is based on Alpine 3 and PHP 8.

### Calling the server with the OpenAPI Generator SDK

We used the `app/og/main.php` script below to call the API with the SDK generated by OpenAPI Generator. The example code was mostly given in the `README.md` file.

```php filename="app/og/main.php"
<?php
require_once(__DIR__ . '/vendor/autoload.php');

$config = OpenAPI\Client\Configuration::getDefaultConfiguration()->setAccessToken('test');
$apiInstance = new OpenAPI\Client\Api\PetApi(new GuzzleHttp\Client(), $config);
$pet = new \OpenAPI\Client\Model\Pet(); // \OpenAPI\Client\Model\Pet | Create a new pet in the store
$pet->setId(1);
$pet->setName("1");

try {
    $result = $apiInstance->addPet($pet);
    print_r($result);
} catch (Exception $e) {
    echo 'Exception when calling PetApi->addPet: ', $e->getMessage(), PHP_EOL;
}
```

To get access to the folder to create the script, give yourself permissions to the shared Docker volume with the command below, using your username.

```sh
sudo chown -R yourUsername ./app
```

Next, we ran the command below and received a successful response.

```sh
docker run --rm -v "./app/og:/app" -w "/app" composer:2.7 sh -c  "composer install && php main.php"
```

The response of `$apiInstance->addPet($pet)` is below.

```text filename="Output"
OpenAPI\Client\Model\Pet Object
(
    [openAPINullablesSetToNull:protected] => Array()
    [container:protected] => Array
        (
            [id] => 1
            [name] => 1
            [category] =>
            [photo_urls] => Array()
            [tags] => Array()
            [status] =>
        )
)
```

First, the command installs the PHP dependencies in the Docker container as recommended in the SDK `README.md` file, then it runs the sample `main.php` script to call the server using the SDK.

### Calling the server with the Speakeasy SDK

The SDK Speakeasy creates also calls the server successfully.

Below is an example script to call the API with the SDK created by Speakeasy. Save it as `app/se/main.php`.

```php filename="app/se/main.php"
<?php

declare(strict_types=1);

require 'vendor/autoload.php';

use OpenAPI\OpenAPI;
use OpenAPI\OpenAPI\Models\Components;

// Typed security object
$security = new Components\Security("<YOUR_PETSTORE_AUTH_HERE>");

$sdk = OpenAPI\SDK::builder()
    ->setSecurity($security->petstoreAuth)
    ->build();

try {
    // Fully typed SDK objects
    $request = new Components\Pet10(
        name: 'doggie',
        photoUrls: [
            'https://example.com/doggie.jpg',
            'https://example.com/doggie2.jpg',
        ],
        id: 10,
        tags: [
            new Components\Tag(
                id: 123,
                name: 'pets',
            ),
            new Components\Tag(
                id: 3,
                name: 'good-dogs',
            ),
            new Components\Tag(
                id: 900,
                name: 'not-cats',
            ),
        ],
        // Typed subobjects
        category: new Components\Category(
            id: 1,
            name: 'Dogs',
        ),
        // Enums help you validate the input data
        status: Components\Status::Available
    );
    $response = $sdk->pet->addPetForm($request);
    if ($response->pet !== null) {
        print_r($response->pet);
    }
} catch (Throwable $e) {
    print_r($e);
}
```

In the example above, we use the `Components` namespace to create a typed security object and a typed request object. We then call the `addPetForm` operation on the `pet` object in the SDK. You'll notice that the SDK helps you validate the input data with enums and typed subobjects.

Let's run the script to see the response.

The command to run the script is nearly identical to the command the OpenAPI Generator SDK used, except for using the Speakeasy folder.

```sh
docker run --rm -v "./app/se:/app" -w "/app" composer:2.7 sh -c  "composer install && php main.php"
```

The response of `$sdk->pet->addPetForm($request)` is below.

```text filename="Output"
OpenAPI\OpenAPI\Models\Components\Pet15 Object
(
    [id] => 10
    [name] => doggie
    [category] => OpenAPI\OpenAPI\Models\Components\Category Object
        (
            [id] => 1
            [name] => Dogs
        )
    [photoUrls] => Array
        (
            [0] => https://example.com/doggie2.jpg
        )
    [tags] => Array
        (
            [0] => OpenAPI\OpenAPI\Models\Components\Tag Object
                (
                    [id] => 3
                    [name] => good-dogs
                )

            [1] => OpenAPI\OpenAPI\Models\Components\Tag Object
                (
                    [id] => 900
                    [name] => not-cats
                )
        )
    [status] => OpenAPI\OpenAPI\Models\Components\Status Enum:string
        (
            [name] => Available
            [value] => available
        )
)
```

## Package structure

Let's compare the structure of the SDKs in terms of code volume and folder structure.

You can count the lines of code in the SDKs by running `cloc` for each (ignoring documentation and test folders):

```sh
cloc ./app/og/lib
cloc ./app/se/src
```

Below are the results for each SDK.

<Table
  columns={[
    { key: "project", header: "Project" },
    { key: "files", header: "Files" },
    { key: "blank", header: "Blank lines" },
    { key: "comment", header: "Comment lines" },
    { key: "code", header: "Code lines" }
  ]}
  data={[
    { 
      project: "OpenAPI Generator", 
      files: "16",
      blank: "1198",
      comment: "4267",
      code: "6316"
    },
    { 
      project: "Speakeasy", 
      files: "84",
      blank: "1073",
      comment: "2214",
      code: "3915"
    }
  ]}
/>

We see that the Speakeasy SDK has five times as many files as OpenAPI Generator, but 40% less code. The libraries Speakeasy uses, as well as shared utility functions, allow it to create more concise code than OpenAPI Generator.

The following commands output the files of each SDK.

```sh
tree ./app/og/lib
tree ./app/se/src
```

Below is the output for OpenAPI Generator.

```sh
â”œâ”€â”€ Api
â”‚   â”œâ”€â”€ PetApi.php
â”‚   â”œâ”€â”€ StoreApi.php
â”‚   â””â”€â”€ UserApi.php
â”œâ”€â”€ ApiException.php
â”œâ”€â”€ Configuration.php
â”œâ”€â”€ HeaderSelector.php
â”œâ”€â”€ Model
â”‚   â”œâ”€â”€ Address.php
â”‚   â”œâ”€â”€ ApiResponse.php
â”‚   â”œâ”€â”€ Category.php
â”‚   â”œâ”€â”€ Customer.php
â”‚   â”œâ”€â”€ ModelInterface.php
â”‚   â”œâ”€â”€ Order.php
â”‚   â”œâ”€â”€ Pet.php
â”‚   â”œâ”€â”€ Tag.php
â”‚   â””â”€â”€ User.php
â””â”€â”€ ObjectSerializer.php
```

The folder structure is simple and clear with nothing unexpected. Files are separated at the API level (pet, store, and user) and by model. There are a few helper files, like `ApiException.php`.

Below is the output for Speakeasy.

```sh
â”œâ”€â”€ Models
â”‚   â”œâ”€â”€ Components
â”‚   â”‚   â”œâ”€â”€ ApiResponse.php
â”‚   â”‚   â”œâ”€â”€ Category.php
â”‚   â”‚   â”œâ”€â”€ Order1.php
â”‚   â”‚   â”œâ”€â”€ Order2.php
â”‚   â”‚   â”œâ”€â”€ Order3.php
â”‚   â”‚   â”œâ”€â”€ Order4.php
â”‚   â”‚   â”œâ”€â”€ Order5.php
â”‚   â”‚   â”œâ”€â”€ Order6.php
â”‚   â”‚   â”œâ”€â”€ OrderStatus.php
â”‚   â”‚   â”œâ”€â”€ Pet1.php
â”‚   â”‚   â”œâ”€â”€ Pet10.php
â”‚   â”‚   â”œâ”€â”€ Pet11.php
â”‚   â”‚   â”œâ”€â”€ Pet12.php
â”‚   â”‚   â”œâ”€â”€ Pet13.php
â”‚   â”‚   â”œâ”€â”€ Pet14.php
â”‚   â”‚   â”œâ”€â”€ Pet15.php
â”‚   â”‚   â”œâ”€â”€ Pet16.php
â”‚   â”‚   â”œâ”€â”€ Pet17.php
â”‚   â”‚   â”œâ”€â”€ Pet18.php
â”‚   â”‚   â”œâ”€â”€ Pet19.php
â”‚   â”‚   â”œâ”€â”€ Pet2.php
â”‚   â”‚   â”œâ”€â”€ Pet20.php
â”‚   â”‚   â”œâ”€â”€ Pet21.php
â”‚   â”‚   â”œâ”€â”€ Pet22.php
â”‚   â”‚   â”œâ”€â”€ Pet3.php
â”‚   â”‚   â”œâ”€â”€ Pet4.php
â”‚   â”‚   â”œâ”€â”€ Pet5.php
â”‚   â”‚   â”œâ”€â”€ Pet6.php
â”‚   â”‚   â”œâ”€â”€ Pet7.php
â”‚   â”‚   â”œâ”€â”€ Pet8.php
â”‚   â”‚   â”œâ”€â”€ Security.php
â”‚   â”‚   â”œâ”€â”€ Status.php
â”‚   â”‚   â”œâ”€â”€ Tag.php
â”‚   â”‚   â”œâ”€â”€ User1.php
â”‚   â”‚   â”œâ”€â”€ User10.php
â”‚   â”‚   â”œâ”€â”€ User11.php
â”‚   â”‚   â”œâ”€â”€ User12.php
â”‚   â”‚   â”œâ”€â”€ User13.php
â”‚   â”‚   â”œâ”€â”€ User15.php
â”‚   â”‚   â”œâ”€â”€ User2.php
â”‚   â”‚   â”œâ”€â”€ User3.php
â”‚   â”‚   â”œâ”€â”€ User4.php
â”‚   â”‚   â”œâ”€â”€ User5.php
â”‚   â”‚   â”œâ”€â”€ User6.php
â”‚   â”‚   â”œâ”€â”€ User7.php
â”‚   â”‚   â”œâ”€â”€ User8.php
â”‚   â”‚   â””â”€â”€ User9.php
â”‚   â”œâ”€â”€ Errors
â”‚   â”‚   â””â”€â”€ SDKException.php
â”‚   â””â”€â”€ Operations
â”‚       â”œâ”€â”€ AddPetFormResponse.php
â”‚       â”œâ”€â”€ AddPetJsonResponse.php
â”‚       â”œâ”€â”€ AddPetRawResponse.php
â”‚       â”œâ”€â”€ CreateUserFormResponse.php
â”‚       â”œâ”€â”€ CreateUserJsonResponse.php
â”‚       â”œâ”€â”€ CreateUserRawResponse.php
â”‚       â”œâ”€â”€ CreateUsersWithListInputResponse.php
â”‚       â”œâ”€â”€ DeleteOrderRequest.php
â”‚       â”œâ”€â”€ DeleteOrderResponse.php
â”‚       â”œâ”€â”€ DeletePetRequest.php
â”‚       â”œâ”€â”€ DeletePetResponse.php
â”‚       â”œâ”€â”€ DeleteUserRequest.php
â”‚       â”œâ”€â”€ DeleteUserResponse.php
â”‚       â”œâ”€â”€ FindPetsByStatusRequest.php
â”‚       â”œâ”€â”€ FindPetsByStatusResponse.php
â”‚       â”œâ”€â”€ FindPetsByTagsRequest.php
â”‚       â”œâ”€â”€ FindPetsByTagsResponse.php
â”‚       â”œâ”€â”€ GetInventoryResponse.php
â”‚       â”œâ”€â”€ GetInventorySecurity.php
â”‚       â”œâ”€â”€ GetOrderByIdRequest.php
â”‚       â”œâ”€â”€ GetOrderByIdResponse.php
â”‚       â”œâ”€â”€ GetPetByIdRequest.php
â”‚       â”œâ”€â”€ GetPetByIdResponse.php
â”‚       â”œâ”€â”€ GetPetByIdSecurity.php
â”‚       â”œâ”€â”€ GetUserByNameRequest.php
â”‚       â”œâ”€â”€ GetUserByNameResponse.php
â”‚       â”œâ”€â”€ LoginUserRequest.php
â”‚       â”œâ”€â”€ LoginUserResponse.php
â”‚       â”œâ”€â”€ LogoutUserResponse.php
â”‚       â”œâ”€â”€ PlaceOrderFormResponse.php
â”‚       â”œâ”€â”€ PlaceOrderJsonResponse.php
â”‚       â”œâ”€â”€ PlaceOrderRawResponse.php
â”‚       â”œâ”€â”€ Status.php
â”‚       â”œâ”€â”€ UpdatePetFormResponse.php
â”‚       â”œâ”€â”€ UpdatePetJsonResponse.php
â”‚       â”œâ”€â”€ UpdatePetRawResponse.php
â”‚       â”œâ”€â”€ UpdatePetWithFormRequest.php
â”‚       â”œâ”€â”€ UpdatePetWithFormResponse.php
â”‚       â”œâ”€â”€ UpdateUserFormRequest.php
â”‚       â”œâ”€â”€ UpdateUserFormResponse.php
â”‚       â”œâ”€â”€ UpdateUserJsonRequest.php
â”‚       â”œâ”€â”€ UpdateUserJsonResponse.php
â”‚       â”œâ”€â”€ UpdateUserRawRequest.php
â”‚       â”œâ”€â”€ UpdateUserRawResponse.php
â”‚       â”œâ”€â”€ UploadFileRequest.php
â”‚       â””â”€â”€ UploadFileResponse.php
â”œâ”€â”€ Pet.php
â”œâ”€â”€ SDK.php
â”œâ”€â”€ SDKBuilder.php
â”œâ”€â”€ SDKConfiguration.php
â”œâ”€â”€ Store.php
â”œâ”€â”€ User.php
â””â”€â”€ Utils
    â”œâ”€â”€ DateHandler.php
    â”œâ”€â”€ DateTimeHandler.php
    â”œâ”€â”€ DefaultRequest.php
    â”œâ”€â”€ DefaultResponse.php
    â”œâ”€â”€ DefaultStream.php
    â”œâ”€â”€ DefaultUri.php
    â”œâ”€â”€ EnumHandler.php
    â”œâ”€â”€ FormMetadata.php
    â”œâ”€â”€ Headers.php
    â”œâ”€â”€ JSON.php
    â”œâ”€â”€ MixedJSONHandler.php
    â”œâ”€â”€ MultipartMetadata.php
    â”œâ”€â”€ ParamsMetadata.php
    â”œâ”€â”€ PathParameters.php
    â”œâ”€â”€ PhpDocTypeParser.php
    â”œâ”€â”€ QueryParameters.php
    â”œâ”€â”€ RequestBodies.php
    â”œâ”€â”€ RequestMetadata.php
    â”œâ”€â”€ Security.php
    â”œâ”€â”€ SecurityClient.php
    â”œâ”€â”€ SecurityMetadata.php
    â”œâ”€â”€ SpeakeasyMetadata.php
    â”œâ”€â”€ UnionHandler.php
    â””â”€â”€ Utils.php
```

The Speakeasy SDK is more complex and has more features. Files are separated at a lower level than OpenAPI Generator â€” at the operation level â€“ and further split into content types of the operation, like `AddPetJsonResponse.php`. There are more helper files bundled with the SDK in the `Utils` folder.

## Code readability

We'll compare the SDKs in terms of code readability, focusing on the `Pet` model first.

### OpenAPI Generator

The `Pet` model generated by OpenAPI Generator inherits a `ModelInterface` and has a `container` property that holds the model's fields. The model's constructor can either take an associative array of field names and values or no arguments. Then, the model exposes getter and setter methods for each field.

Type mapping is presented as an associative array of field names and types as strings. The `Pet` model has the following fields:

```php filename="app/og/lib/Model/Pet.php"
//...
    protected static $openAPITypes = [
        'id' => 'int',
        'name' => 'string',
        'category' => '\OpenAPI\Client\Model\Category',
        'photo_urls' => 'string[]',
        'tags' => '\OpenAPI\Client\Model\Tag[]',
        'status' => 'string'
    ];
//...
```

Overall, the `Pet` model is extremely verbose, coming in at 623 lines of code, including comments and whitespace, but excluding dependencies.

Contrast this with the `Pet` model generated by Speakeasy.

### Speakeasy

The `Pet10` model generated by Speakeasy is more concise and readable, presented in its entirety below:

```php filename="app/se/src/Models/Components/Pet10.php"
<?php

/**
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

declare(strict_types=1);

namespace OpenAPI\OpenAPI\Models\Components;

use OpenAPI\OpenAPI\Utils\SpeakeasyMetadata;
class Pet10
{
    /**
     *
     * @var ?int $id
     */
    #[SpeakeasyMetadata('form:name=id')]
    public ?int $id = null;

    /**
     *
     * @var string $name
     */
    #[SpeakeasyMetadata('form:name=name')]
    public string $name;

    /**
     *
     * @var ?Category $category
     */
    #[SpeakeasyMetadata('form:name=category,json=true')]
    public ?Category $category = null;

    /**
     * $photoUrls
     *
     * @var array<string> $photoUrls
     */
    #[SpeakeasyMetadata('form:name=photoUrls')]
    public array $photoUrls;

    /**
     * $tags
     *
     * @var ?array<Tag> $tags
     */
    #[SpeakeasyMetadata('form:name=tags,json=true')]
    public ?array $tags = null;

    /**
     * pet status in the store
     *
     * @var ?Status $status
     */
    #[SpeakeasyMetadata('form:name=status')]
    public ?Status $status = null;

    /**
     * @param  string  $name
     * @param  array<string>  $photoUrls
     * @param  ?int  $id
     * @param  ?Category  $category
     * @param  ?array<Tag>  $tags
     * @param  ?Status  $status
     */
    public function __construct(string $name, array $photoUrls, ?int $id = null, ?Category $category = null, ?array $tags = null, ?Status $status = null)
    {
        $this->name = $name;
        $this->photoUrls = $photoUrls;
        $this->id = $id;
        $this->category = $category;
        $this->tags = $tags;
        $this->status = $status;
    }
}
```

The `Pet10` model, at 76 lines of code, including comments and whitespace, is more concise and readable than the `Pet` model generated by OpenAPI Generator. Speakeasy uses modern PHP features like typed properties, attributes, and named arguments to make the model more readable.

Serialization and deserialization are handled by [JMS/Serializer](http://jmsyst.com/libs/serializer), which uses annotations in the model to convert objects to and from JSON. This allows Speakeasy to create more concise and readable code.

Instead of using a getter and setter for each field, Speakeasy uses typed properties and a constructor to set the fields. This makes implementing the model more straightforward and less verbose.

## Dependencies

The OpenAPI Generator SDK Composer file has the dependencies below.

- The ext-curl, ext-json, and ext-mbstring PHP extensions, which handle calling HTTP, serialize objects to JSON, and work with Unicode.
- [Guzzle](https://docs.guzzlephp.org/en/stable) and [Guzzle PSR-7](https://github.com/guzzle/psr7) send HTTP requests with [PSR-7](https://www.php-fig.org/psr/psr-7/) support.
- [PHPUnit](https://phpunit.de/documentation.html) runs tests.
- [Symfony PHP Coding Standards Fixer](https://cs.symfony.com/) formats code.

The Speakeasy SDK Composer file has the dependencies below.

- [Guzzle](https://docs.guzzlephp.org/en/stable) sends HTTP requests.
- [Serializer](https://jmsyst.com/libs/serializer) converts PHP objects to and from JSON and XML to be sent over HTTP.
- [Brick\DateTime](https://github.com/brick/date-time) manages dates, times, and time zones.
- [phpDocumentor TypeResolver](https://github.com/phpDocumentor/TypeResolver) generates types from DocBlocks.
- [Laravel Pint](https://laravel.com/docs/11.x/pint) formats code.
- [PHPStan](https://phpstan.org/) finds errors and handles complex types.
- [PHPUnit](https://phpunit.de/documentation.html) runs tests. However, there are no tests in the created SDK.
- [Rector](https://github.com/rectorphp/rector) checks code quality.
- [Roave Security Advisories](https://github.com/Roave/SecurityAdvisories) warns about dangerous Composer dependencies.

Both creators use similar libraries, but OpenAPI Generator relies as much as possible on core PHP extensions, while Speakeasy has more serialization and complex typing libraries: Serializer, Brick, TypeResolver, and PHPStan.

## Supported PHP versions

At the time of compiling this comparison, the Speakeasy SDK required at least PHP version 8.1. PHP 8 introduced language features to support stronger typing.

The OpenAPI Generator SDK still supports PHP version 7.4, though it is compatible with PHP 8.

We recommend you use the latest PHP version with both SDKs.

## Strong typing

Both creators use DocBlocks to provide type annotations to all parameters and variables in the SDKs, which is useful for IDEs and for programmers to understand the code.

But files in the Speakeasy SDK include the line `declare(strict_types=1);`, which causes PHP to throw a `TypeError` if a function accepts or returns an invalid type at runtime. The OpenAPI Generator SDK files do not have this line and so don't check types at runtime.

In Speakeasy, the JMS Serializer checks types when converting from JSON to PHP objects at runtime. OpenAPI Generator doesn't have this in plain Guzzle.

### Enums

{/* TODO Speakeasy uses proper enums and OG hasnt got a clue!! */}

OpenAPI Generator provides a workaround for enumerations using constant strings and functions. Below is the pet status enumeration for OpenAPI Generator.

```php
public const STATUS_AVAILABLE = 'available';
public const STATUS_PENDING = 'pending';
public const STATUS_SOLD = 'sold';

/**
 * Gets allowable values of the enum
 *
 * @return string[]
 */
public function getStatusAllowableValues()
{
    return [
        self::STATUS_AVAILABLE,
        self::STATUS_PENDING,
        self::STATUS_SOLD,
    ];
}
```

Below is the pet status enumeration for Speakeasy using modern PHP.

```php
enum Status: string
{
    case Available = 'available';
    case Pending = 'pending';
    case Sold = 'sold';
}
```

### Content types

Below are the content types in the schema for updating a pet, in JSON, XML, or as a form.

```yaml
requestBody:
  content:
    application/json:
      schema:
        $ref: "#/components/schemas/Pet"
    application/xml:
      schema:
        $ref: "#/components/schemas/Pet"
    application/x-www-form-urlencoded:
      schema:
        $ref: "#/components/schemas/Pet"
```

Speakeasy supports JSON and form content types, but not XML. OpenAPI Generator supports all three. 

In Speakeasy, each content type for each operation will become its own file in the SDK. In OpenAPI Generator, all operations are combined into one API file.

### Unions

In OpenAPI, you can use `oneOf` in a schema like this:

```yaml
Pet:
  type: object
  properties:
    age:
      oneOf:
        - type: integer
        - type: string
```

The `age` property will be typed as a union in PHP in Speakeasy:

```php
class Pet10
{
    /**
     *
     * @var int|string|null $age
     */
    #[SpeakeasyMetadata('form:name=age')]
    public int|string|null $age = null;

...

    public function __construct(?string $name = null, ?array $photoUrls = null, int|string|null $age = null,
```

OpenAPI Generator can handle this schema, but creates a 380-line file called `PetAge.php` with custom code to implement unions.

## Created documentation

Both Speakeasy and OpenAPI Generator create a `docs` directory with Markdown documentation and PHP usage examples for every operation and every model.

We found the usage examples in the Speakeasy SDK worked flawlessly, while the examples in the OpenAPI Generator SDK don't always include required fields when instantiating objects. For instance, the `PetApi.md` example in the OpenAPI Generator SDK doesn't include any fields for the `Pet` object.

```php filename="app/og/docs/PetApi.md"
<?php
require_once(__DIR__ . '/vendor/autoload.php');


// Configure OAuth2 access token for authorization: petstore_auth
$config = OpenAPI\Client\Configuration::getDefaultConfiguration()->setAccessToken('YOUR_ACCESS_TOKEN');


$apiInstance = new OpenAPI\Client\Api\PetApi(
    // If you want to use a custom http client, pass your client which implements `GuzzleHttp\ClientInterface`.
    // This is optional, `GuzzleHttp\Client` will be used as default.
    new GuzzleHttp\Client(),
    $config
);
$pet = new \OpenAPI\Client\Model\Pet(); // \OpenAPI\Client\Model\Pet | Create a new pet in the store

try {
    $result = $apiInstance->addPet($pet);
    print_r($result);
} catch (Exception $e) {
    echo 'Exception when calling PetApi->addPet: ', $e->getMessage(), PHP_EOL;
}
```

Both SDKs include detailed documentation for operations and models, but the Speakeasy SDK includes more detailed usage examples that work out of the box.

Speakeasy also creates appropriate example strings based on a field's `format` in the OpenAPI schema.

For example, if we add `format: uri` to the item for a pet's photo URLs, we can compare each SDK's usage documentation for this field.

The SDK created by Speakeasy includes a helpful example of this field that lists multiple random URLs:

```php
# Speakeasy SDK Usage Example
pet = shared.Pet(
    # ...
    photo_urls=[
        'https://salty-stag.name',
        'https://moral-star.info',
        'https://present-giggle.info',
    ]
)
```

The OpenAPI Generator SDK's documentation uses a single random string in its example:

```php
# PHP SDK Usage Example
pet = Pet(
    # ...
    photo_urls=[
        "photo_urls_example"
    ]
)
```

## Automation

This comparison focuses on installing and using Speakeasy and OpenAPI Generator using the command line, but both tools can also run as part of a CI workflow. For example, you can set up a [GitHub Action](https://github.com/speakeasy-api/sdk-generation-action) to ensure your Speakeasy SDK is always up-to-date when your API schema changes.

## Unsupported features

At the time of writing, OpenAPI Generator does not support:

- [Data types null, UUID](https://openapi-generator.tech/docs/generators/php/#data-type-feature), [all, any, and union](https://openapi-generator.tech/docs/generators/php/#schema-support-feature).
- [Server URLs with parameters](https://openapi-generator.tech/docs/generators/php/#global-feature).
- [Callbacks](https://openapi-generator.tech/docs/generators/php/#global-feature) (allowing your server to call a client).
- [Link objects](https://openapi-generator.tech/docs/generators/php/#global-feature) (relating operations to each other to indicate a workflow).

Neither service supports OAuth 2 flows other than Implicit.

## Summary

Open-source tooling can be a great way to experiment, but if you're working on production code, the Speakeasy PHP SDK creator will help ensure that you create reliable and performant PHP SDKs. The Speakeasy PHP SDK creator uses strong typing to provide safe runtime performance, supports many OpenAPI features, and is rapidly adding more.
